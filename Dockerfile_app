FROM alpine:latest

# Mise à jour et installation du serveur web Nginx
RUN apk update && \
	apk add --no-cache nginx && \
	rm -rf /var/cache/apk/*

# Création d'une page HTML simple comme preuve de déploiement
# Place la page dans le répertoire servi par nginx (Alpine: /var/lib/nginx/html)
RUN mkdir -p /var/lib/nginx/html && \
	echo "<h1>Our Application Deployed via Terraform IaC!</h1>" > /var/lib/nginx/html/index.html

# Expose le port par défaut de Nginx
EXPOSE 80

# Démarre Nginx en mode non-démonisé
CMD ["nginx", "-g", "daemon off;"]
